{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "definitions": {
    "ValidationResult": {
      "properties": {
        "differences": {
          "items": {
            "type": "object"
          },
          "type": "array"
        },
        "metrics_comparison": {
          "type": "object"
        },
        "passed": {
          "type": "boolean"
        },
        "similarity_score": {
          "maximum": 1,
          "minimum": 0,
          "type": "number"
        },
        "timestamp": {
          "format": "date-time",
          "type": "string"
        },
        "validation_id": {
          "type": "string"
        }
      },
      "type": "object"
    }
  },
  "description": "A gold standard sample for regression testing and validation",
  "properties": {
    "data": {
      "description": "The actual sample data",
      "properties": {
        "artifacts": {
          "description": "Paths to artifact files",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "inputs": {
          "description": "Input data used to generate the sample",
          "type": "object"
        },
        "metrics": {
          "description": "Performance and quality metrics",
          "type": "object"
        },
        "outputs": {
          "description": "Output data from the execution",
          "type": "object"
        }
      },
      "type": "object"
    },
    "git_commit": {
      "description": "Git commit hash",
      "type": "string"
    },
    "lineage": {
      "properties": {
        "derivation": {
          "enum": [
            "baseline",
            "refinement",
            "regression_fix",
            "feature_addition"
          ],
          "type": "string"
        },
        "parent_sample_id": {
          "type": "string"
        }
      },
      "type": "object"
    },
    "metadata": {
      "properties": {
        "environment": {
          "description": "Execution environment details",
          "type": "object"
        },
        "model_id": {
          "type": "string"
        },
        "nld_profile": {
          "description": "nLD characteristics at time of capture",
          "type": "object"
        },
        "tags": {
          "items": {
            "type": "string"
          },
          "type": "array"
        }
      },
      "type": "object"
    },
    "pipeline_id": {
      "description": "Pipeline that generated this sample",
      "type": "string"
    },
    "sample_id": {
      "description": "Unique identifier for this gold sample",
      "type": "string"
    },
    "stage": {
      "description": "Pipeline stage where sample was captured",
      "type": "string"
    },
    "step": {
      "description": "Specific step within the stage",
      "type": "string"
    },
    "timestamp": {
      "format": "date-time",
      "type": "string"
    },
    "validation_results": {
      "description": "History of validations against this gold sample",
      "items": {
        "$ref": "#/definitions/ValidationResult"
      },
      "type": "array"
    }
  },
  "required": [
    "sample_id",
    "pipeline_id",
    "stage",
    "timestamp",
    "data"
  ],
  "title": "Gold Sample",
  "type": "object"
}