{
  "$id": "https://hypersync.ai/schemas/consensus/algebraic_consensus_subject.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "Polynomial system encoding of consensus constraints for Byzantine detection",
  "properties": {
    "consensus_round": {
      "minimum": 0,
      "type": "integer"
    },
    "constraint_system": {
      "properties": {
        "field": {
          "enum": [
            "QQ",
            "ZZ",
            "RR",
            "surreal_adapter"
          ],
          "type": "string"
        },
        "max_degree": {
          "maximum": 20,
          "minimum": 1,
          "type": "integer"
        },
        "max_variables": {
          "maximum": 100,
          "minimum": 1,
          "type": "integer"
        },
        "monomial_order": {
          "enum": [
            "lex",
            "grlex",
            "grevlex"
          ],
          "type": "string"
        },
        "polynomials": {
          "items": {
            "properties": {
              "constraint_type": {
                "enum": [
                  "equality",
                  "inequality",
                  "membership"
                ],
                "type": "string"
              },
              "expression": {
                "type": "string"
              },
              "id": {
                "type": "string"
              }
            },
            "type": "object"
          },
          "type": "array"
        }
      },
      "required": [
        "polynomials",
        "field",
        "monomial_order"
      ],
      "type": "object"
    },
    "kind": {
      "const": "AlgebraicConsensusSubject",
      "type": "string"
    },
    "node_commitments": {
      "items": {
        "properties": {
          "commitment_hash": {
            "pattern": "^sha256:[A-Fa-f0-9]{64}$",
            "type": "string"
          },
          "node_id": {
            "type": "string"
          },
          "polynomial_encoding": {
            "items": {
              "properties": {
                "coefficients": {
                  "items": {
                    "type": "number"
                  },
                  "type": "array"
                },
                "degree": {
                  "maximum": 10,
                  "minimum": 0,
                  "type": "integer"
                },
                "variables": {
                  "items": {
                    "type": "string"
                  },
                  "type": "array"
                }
              },
              "type": "object"
            },
            "type": "array"
          }
        },
        "required": [
          "node_id",
          "commitment_hash",
          "polynomial_encoding"
        ],
        "type": "object"
      },
      "minItems": 1,
      "type": "array"
    },
    "timestamp": {
      "format": "date-time",
      "type": "string"
    }
  },
  "required": [
    "kind",
    "consensus_round",
    "node_commitments",
    "constraint_system",
    "timestamp"
  ],
  "title": "AlgebraicConsensusSubject",
  "type": "object"
}