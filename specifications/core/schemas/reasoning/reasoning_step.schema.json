{
  "$id": "https://example.com/spec-pack/schemas/reasoning/reasoning_step.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {
    "agenda_size": {
      "minimum": 0,
      "type": "integer"
    },
    "applied_rule": {
      "type": "string"
    },
    "diagnostics": {
      "additionalProperties": true,
      "type": "object"
    },
    "fingerprint": {
      "pattern": "^f128:[A-Fa-f0-9]{32}$",
      "type": "string"
    },
    "kind": {
      "const": "ReasoningStep",
      "type": "string"
    },
    "plan_id": {
      "type": "string"
    },
    "post_measure": {
      "oneOf": [
        {
          "type": "number"
        },
        {
          "items": {
            "type": "number"
          },
          "maxItems": 6,
          "minItems": 2,
          "type": "array"
        }
      ]
    },
    "pre_measure": {
      "oneOf": [
        {
          "type": "number"
        },
        {
          "items": {
            "type": "number"
          },
          "maxItems": 6,
          "minItems": 2,
          "type": "array"
        }
      ]
    },
    "step_index": {
      "minimum": 0,
      "type": "integer"
    },
    "tool_invocations": {
      "items": {
        "additionalProperties": false,
        "properties": {
          "cost_class": {
            "enum": [
              "O(1)",
              "O(n)",
              "O(n log n)",
              "heuristic"
            ],
            "type": "string"
          },
          "notes": {
            "type": "string"
          },
          "tool_id": {
            "type": "string"
          }
        },
        "required": [
          "tool_id"
        ],
        "type": "object"
      },
      "type": "array"
    }
  },
  "required": [
    "kind",
    "plan_id",
    "step_index",
    "pre_measure",
    "post_measure",
    "agenda_size",
    "fingerprint"
  ],
  "title": "ReasoningStep",
  "type": "object"
}