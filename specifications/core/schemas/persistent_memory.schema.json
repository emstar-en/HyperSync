{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "migration_policy": "replace-old-techniques",
  "properties": {
    "encryption": {
      "migration_policy": "replace-old-techniques",
      "properties": {
        "at_rest": {
          "enum": [
            "xchacha20-poly1305",
            "aes-gcm"
          ],
          "migration_policy": "replace-old-techniques",
          "release_status": "pre-alpha",
          "stability": "experimental",
          "unreleased": true
        },
        "key_source": {
          "enum": [
            "kms",
            "hsm"
          ],
          "migration_policy": "replace-old-techniques",
          "release_status": "pre-alpha",
          "stability": "experimental",
          "unreleased": true
        },
        "migration_policy": "replace-old-techniques",
        "release_status": "pre-alpha",
        "stability": "experimental",
        "unreleased": true
      },
      "release_status": "pre-alpha",
      "stability": "experimental",
      "type": "object",
      "unreleased": true
    },
    "layout": {
      "migration_policy": "replace-old-techniques",
      "properties": {
        "backend": {
          "enum": [
            "cassandra",
            "scylla",
            "postgres"
          ],
          "migration_policy": "replace-old-techniques",
          "release_status": "pre-alpha",
          "stability": "experimental",
          "unreleased": true
        },
        "migration_policy": "replace-old-techniques",
        "release_status": "pre-alpha",
        "stability": "experimental",
        "tables": {
          "migration_policy": "replace-old-techniques",
          "properties": {
            "citations": {
              "migration_policy": "replace-old-techniques",
              "release_status": "pre-alpha",
              "stability": "experimental",
              "type": "string",
              "unreleased": true
            },
            "mem_kv": {
              "migration_policy": "replace-old-techniques",
              "release_status": "pre-alpha",
              "stability": "experimental",
              "type": "string",
              "unreleased": true
            },
            "migration_policy": "replace-old-techniques",
            "receipts": {
              "migration_policy": "replace-old-techniques",
              "release_status": "pre-alpha",
              "stability": "experimental",
              "type": "string",
              "unreleased": true
            },
            "release_status": "pre-alpha",
            "stability": "experimental",
            "unreleased": true
          },
          "release_status": "pre-alpha",
          "stability": "experimental",
          "type": "object",
          "unreleased": true
        },
        "unreleased": true,
        "vectors_at_rest": {
          "default": false,
          "migration_policy": "replace-old-techniques",
          "release_status": "pre-alpha",
          "stability": "experimental",
          "type": "boolean",
          "unreleased": true
        }
      },
      "release_status": "pre-alpha",
      "required": [
        "backend",
        "tables"
      ],
      "stability": "experimental",
      "type": "object",
      "unreleased": true
    },
    "migration_policy": "replace-old-techniques",
    "mode": {
      "enum": [
        "pointer_only",
        "payload_redacted",
        "payload_encrypted"
      ],
      "migration_policy": "replace-old-techniques",
      "release_status": "pre-alpha",
      "stability": "experimental",
      "unreleased": true
    },
    "redaction": {
      "migration_policy": "replace-old-techniques",
      "properties": {
        "migration_policy": "replace-old-techniques",
        "pii": {
          "enum": [
            "mask",
            "hash",
            "drop"
          ],
          "migration_policy": "replace-old-techniques",
          "release_status": "pre-alpha",
          "stability": "experimental",
          "unreleased": true
        },
        "release_status": "pre-alpha",
        "secrets": {
          "enum": [
            "hash",
            "drop"
          ],
          "migration_policy": "replace-old-techniques",
          "release_status": "pre-alpha",
          "stability": "experimental",
          "unreleased": true
        },
        "stability": "experimental",
        "unreleased": true
      },
      "release_status": "pre-alpha",
      "stability": "experimental",
      "type": "object",
      "unreleased": true
    },
    "release_status": "pre-alpha",
    "retention": {
      "$ref": "retention_policy.schema.json",
      "migration_policy": "replace-old-techniques",
      "release_status": "pre-alpha",
      "stability": "experimental",
      "unreleased": true
    },
    "stability": "experimental",
    "unreleased": true
  },
  "release_status": "pre-alpha",
  "required": [
    "mode",
    "encryption",
    "layout",
    "retention"
  ],
  "stability": "experimental",
  "title": "PersistentMemory",
  "type": "object",
  "unreleased": true
}