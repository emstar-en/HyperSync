{
  "$id": "https://hypersync.dev/specs/sdl/sdl_shard_descriptor.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "description": "Descriptor for a file or logical unit participating in the Semantic Data Lake (SDL).",
  "properties": {
    "content_summary": {
      "description": "Optional human- or model-authored summary of the shard contents.",
      "type": "string"
    },
    "created_at_utc": {
      "description": "Ingestion time for this descriptor.",
      "format": "date-time",
      "type": "string"
    },
    "determinism_tier": {
      "description": "Determinism tier of the content as seen by HyperSync.",
      "enum": [
        "D0_bit_exact",
        "D1_bounded_non_deterministic",
        "D2_open_world"
      ],
      "type": "string"
    },
    "embedding": {
      "additionalProperties": true,
      "description": "Reference to one or more embeddings in the SDL vector index.",
      "properties": {
        "dimensions": {
          "description": "Dimensionality of the embedding vector.",
          "minimum": 1,
          "type": "integer"
        },
        "space": {
          "description": "Identifier for the embedding space (e.g. model family / metric).",
          "type": "string"
        },
        "vector_ref": {
          "description": "Opaque reference to the stored vector (not the vector itself).",
          "type": "string"
        }
      },
      "type": "object"
    },
    "governance": {
      "additionalProperties": true,
      "description": "Governance and safety-related metadata for the shard.",
      "properties": {
        "clearance_level": {
          "description": "Clearance level required to use this shard.",
          "type": "string"
        },
        "contains_pii": {
          "description": "True if the shard may contain personally identifiable information.",
          "type": "boolean"
        },
        "sensitivity": {
          "description": "Free-form sensitivity classification (e.g. public, internal, confidential).",
          "type": "string"
        }
      },
      "type": "object"
    },
    "id": {
      "description": "Stable, canonical identifier for the shard (independent of filesystem path).",
      "type": "string"
    },
    "kind": {
      "description": "High-level shard kind (e.g. capsule_logic, schema, policy, doc, example).",
      "type": "string"
    },
    "metadata": {
      "additionalProperties": true,
      "description": "Additional metadata for SDL tooling and operators.",
      "type": "object"
    },
    "semantic_tags": {
      "description": "Free-form semantic tags describing the shard (domains, capabilities, invariants).",
      "items": {
        "type": "string"
      },
      "type": "array"
    },
    "source": {
      "additionalProperties": false,
      "properties": {
        "hash_algo": {
          "description": "Hash algorithm used for content fingerprint (e.g. sha256).",
          "type": "string"
        },
        "hash_value": {
          "description": "Hex-encoded content hash value.",
          "type": "string"
        },
        "media_type": {
          "description": "Media type such as application/json, application/yaml, text/markdown.",
          "type": "string"
        },
        "path": {
          "description": "Original filesystem path at time of ingestion (for operator reference only).",
          "type": "string"
        },
        "size_bytes": {
          "description": "Size of the source content in bytes at ingestion time.",
          "minimum": 0,
          "type": "integer"
        }
      },
      "required": [
        "path"
      ],
      "type": "object"
    },
    "updated_at_utc": {
      "description": "Last update time for this descriptor.",
      "format": "date-time",
      "type": "string"
    }
  },
  "required": [
    "id",
    "source",
    "determinism_tier"
  ],
  "title": "SDL Shard Descriptor",
  "type": "object"
}