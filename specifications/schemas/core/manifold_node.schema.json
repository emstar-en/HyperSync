{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://hypersync.io/schemas/core/manifold_node.schema.json",
  "title": "Manifold Node",
  "description": "The fundamental atomic unit of HyperSync. Represents ANY entity that occupies a coordinate in the geometric space or participates in routing/consensus.",
  "type": "object",
  "properties": {
    "id": {
    "type": "string",
    "description": "Globally unique identifier (UUID, content hash, or registry ID)."
    },
    "type": {
    "type": "string",
    "description": "Primary functional category of this node. Recommended values include: 'agent', 'service', 'data_shard', 'user_session', 'policy_anchor', 'virtual_landmark', 'metric_probe', 'ingress', 'egress', 'composite', but this field is intentionally open-ended."
    },
    "roles": {
    "type": "array",
    "description": "Optional secondary roles for this node (e.g., 'router', 'cache', 'coordinator', 'checkpoint').",
    "items": {
    "type": "string"
    },
    "uniqueItems": true
    },
    "version": {
    "type": "string",
    "description": "Logical version of this node's configuration/contract (e.g., semantic version or spec hash)."
    },
    "determinism_tier": {
    "type": "string",
    "description": "Optional determinism tier label for behavior localized to this node (e.g., 'D0_BIT_EXACT', 'D1_REPLAYABLE', 'D2_STATISTICAL', 'D3_BEST_EFFORT')."
    },
    "coordinate": {
    "$ref": "https://hypersync.io/schemas/core/coordinate.schema.json#"
    },
    "mass": {
    "type": "number",
    "default": 1.0,
    "description": "The 'gravity' of this node. Higher mass typically attracts more traffic/data or increases routing preference."
    },
    "charge": {
    "type": "number",
    "default": 0.0,
    "description": "Optional polarity (e.g., producer vs consumer, source vs sink) usable in electromagnetic-style routing heuristics."
    },
    "capacity": {
    "type": "object",
    "description": "Operational capacity hints for schedulers and planners.",
    "properties": {
    "max_concurrent_requests": {
    "type": "integer",
    "minimum": 0
    },
    "max_throughput_units": {
    "type": "number",
    "description": "Abstract throughput capacity (e.g., requests/sec, messages/sec)."
    },
    "max_storage_bytes": {
    "type": "number"
    },
    "cpu_weight": {
    "type": "number",
    "description": "Relative CPU weight/priority."
    },
    "memory_weight": {
    "type": "number",
    "description": "Relative memory weight/priority."
    }
    }
    },
    "observability": {
    "type": "object",
    "description": "Optional, aggregated recent observability metrics associated with this node.",
    "properties": {
    "latency_ms_p50": {
    "type": "number"
    },
    "latency_ms_p95": {
    "type": "number"
    },
    "error_rate": {
    "type": "number",
    "description": "Error rate in [0,1] over a recent window."
    },
    "utilization": {
    "type": "number",
    "description": "Fractional utilization in [0,1]."
    },
    "health_score": {
    "type": "number",
    "description": "Abstract health score in [0,1], where 1 is fully healthy."
    },
    "last_observed_at": {
    "type": "string",
    "format": "date-time"
    }
    }
    },
    "state_vector": {
    "type": "object",
    "description": "Arbitrary key-value state associated with this node. Intended as a flexible carrier for small, structured state.",
    "additionalProperties": true
    },
    "labels": {
    "type": "object",
    "description": "Non-sensitive string labels for search/filter/grouping (e.g., 'env=prod', 'tier=edge').",
    "additionalProperties": {
    "type": "string"
    }
    },
    "tags": {
    "type": "array",
    "description": "Free-form tags for classification, UX grouping, or policy selection.",
    "items": {
    "type": "string"
    },
    "uniqueItems": true
    },
    "tenant": {
    "type": "string",
    "description": "Optional tenant/owner identifier (for multi-tenant or multi-organization fabrics)."
    },
    "jurisdiction": {
    "type": "string",
    "description": "Optional jurisdiction or region tag for compliance-aware routing (e.g., 'eu', 'us', 'in')."
    },
    "interfaces": {
    "type": "array",
    "description": "Protocols and interface families this node speaks (e.g., 'http/1.1', 'grpc', 'stunir-ipc', 'kappa-channel').",
    "items": {
    "type": "string"
    },
    "uniqueItems": true
    },
    "implementation_hints": {
    "type": "object",
    "description": "Implementation/runtime hints. Non-normative but useful for codegen and runtime tuning.",
    "properties": {
    "is_thread_safe": {
    "type": "boolean"
    },
    "memory_model": {
    "type": "string",
    "description": "Preferred concurrency/memory model.",
    "enum": [
    "shared",
    "actor",
    "stm",
    "async_single_threaded"
    ]
    },
    "simd_compatible": {
    "type": "boolean"
    },
    "placement_preference": {
    "type": "string",
    "description": "High-level placement preference (e.g., 'edge', 'core', 'gpu', 'nvm')."
    }
    }
    },
    "lifecycle": {
    "type": "object",
    "description": "Lifecycle and provenance information for this node definition.",
    "properties": {
    "created_at": {
    "type": "string",
    "format": "date-time"
    },
    "updated_at": {
    "type": "string",
    "format": "date-time"
    },
    "created_by": {
    "type": "string",
    "description": "Originating agent/operator ID."
    },
    "updated_by": {
    "type": "string"
    },
    "status": {
    "type": "string",
    "description": "Lifecycle status of this node definition.",
    "enum": [
    "active",
    "inactive",
    "deprecated",
    "experimental"
    ]
    }
    }
    },
    "links": {
    "type": "array",
    "description": "Optional references to related entities (docs, receipts, external systems).",
    "items": {
    "type": "object",
    "properties": {
    "rel": {
    "type": "string",
    "description": "Relationship type (e.g., 'doc', 'owner', 'upstream', 'downstream')."
    },
    "href": {
    "type": "string",
    "description": "URI or identifier of the linked resource."
    },
    "note": {
    "type": "string"
    }
    },
    "required": [
    "rel",
    "href"
    ]
    }
    },
    "default_metric_policy": {
    "description": "Optional metric policy associated with this node for local routing/selection decisions.",
    "oneOf": [
    {
    "type": "string",
    "description": "Reference to a metric_policy.policy_id."
    },
    {
    "$ref": "https://hypersync.io/schemas/geometry/metric_policy.schema.json#"
    }
    ]
    },
    "mechanism_profile": {
    "description": "Optional mechanism profile associated with this node.",
    "oneOf": [
    {
    "type": "string",
    "description": "Identifier of a mechanism_profile."
    },
    {
    "$ref": "https://hypersync.io/schemas/mechanism_profile.schema.json#"
    }
    ]
    },
    "extensions": {
    "type": "object",
    "description": "Namespace for domain-specific or deployment-specific extensions.",
    "additionalProperties": true
    }
  },
  "required": [
    "id",
    "type",
    "coordinate"
  ],
  "additionalProperties": true
}