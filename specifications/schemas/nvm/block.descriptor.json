{
  "$id": "schema://nvm/block.descriptor.v1.json",
  "$schema": "ext://fcbd7642ed3f",
  "properties": {
    "block_id": {
      "type": "string"
    },
    "class": {
      "enum": [
        "commitment",
        "sketch",
        "stats",
        "embedding_pq",
        "index_ivfpq",
        "plan_hints"
      ]
    },
    "codebook": {
      "properties": {
        "commitment": {
          "type": "string"
        },
        "opq_dim": {
          "type": "integer"
        },
        "pq_bits": {
          "type": "integer"
        },
        "pq_m": {
          "type": "integer"
        },
        "type": {
          "enum": [
            "opq_pq",
            "pq"
          ]
        }
      },
      "type": "object"
    },
    "geometry": {
      "properties": {
        "curvature": {
          "type": "number"
        },
        "radius_cap": {
          "type": "number"
        },
        "space": {
          "enum": [
            "euclidean",
            "spherical",
            "poincare_ball",
            "hyperboloid",
            "spd_logeuclid"
          ]
        }
      },
      "required": [
        "space"
      ],
      "type": "object"
    },
    "index": {
      "properties": {
        "params": {
          "type": "object"
        },
        "type": {
          "enum": [
            "hnsw_euclidean",
            "hnsw_hyperbolic",
            "ivfpq",
            "bruteforce"
          ]
        }
      },
      "required": [
        "type"
      ],
      "type": "object"
    },
    "policy_digest": {
      "type": "string"
    },
    "retention": {
      "properties": {
        "tier": {
          "enum": [
            "hot",
            "cold"
          ]
        },
        "ttl_days": {
          "type": "integer"
        }
      },
      "type": "object"
    }
  },
  "required": [
    "block_id",
    "class",
    "geometry",
    "index",
    "versions",
    "retention"
  ],
  "type": "object"
}