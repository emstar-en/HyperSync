{
  "$id": "schema://retrieval/hybrid.config.v1.json",
  "$schema": "ext://fcbd7642ed3f",
  "properties": {
    "ann": {
      "properties": {
        "M": {
          "type": "integer"
        },
        "ef_construction": {
          "type": "integer"
        },
        "ef_runtime": {
          "minimum": 1,
          "type": "integer"
        },
        "index": {
          "enum": [
            "hnsw_h",
            "hnsw_e",
            "ivfpq",
            "bruteforce"
          ]
        },
        "k": {
          "minimum": 1,
          "type": "integer"
        }
      },
      "required": [
        "index"
      ],
      "type": "object"
    },
    "determinism": {
      "properties": {
        "seed": {
          "type": "integer"
        },
        "tie_break": {
          "enum": [
            "lexicographic",
            "stable_index"
          ]
        }
      },
      "type": "object"
    },
    "geometry": {
      "properties": {
        "curvature": {
          "type": "number"
        },
        "radius_cap": {
          "type": "number"
        },
        "space": {
          "enum": [
            "poincare_ball",
            "hyperboloid",
            "euclidean",
            "spherical"
          ]
        }
      },
      "required": [
        "space"
      ],
      "type": "object"
    },
    "receipts": {
      "properties": {
        "emit": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "fields": {
          "items": {
            "type": "string"
          },
          "type": "array"
        }
      },
      "type": "object"
    },
    "refine": {
      "properties": {
        "eps": {
          "type": "number"
        },
        "k": {
          "minimum": 1,
          "type": "integer"
        },
        "mode": {
          "enum": [
            "none",
            "exact_within_radius",
            "exact_topk"
          ]
        },
        "r": {
          "type": "number"
        },
        "radius_strategy": {
          "enum": [
            "pivot_k_plus_eps",
            "fixed",
            "quantile"
          ]
        }
      },
      "required": [
        "mode"
      ],
      "type": "object"
    }
  },
  "required": [
    "geometry",
    "ann",
    "refine",
    "receipts",
    "determinism"
  ],
  "type": "object"
}